<div class="tr-page">

  <!-- HEADER -->
  <div class="tr-header">
    <div>
      <h2>Ticket Type Management</h2>
      <p class="sub">Create, update, and manage ticket types in the same portal layout.</p>
    </div>

    <div class="err" *ngIf="errMsg">{{ errMsg }}</div>
  </div>

  <div class="page-container">

    <!-- ===================== LEFT : FORM ===================== -->
    <div class="form-section card-glass">

      <div class="card-title">
        <span class="dot"></span>
        <h3>Ticket Type Editor</h3>
      </div>

      <!-- Like Ticket: New button on top -->
      <div class="top-actions">
        <button type="button" class="btn ghost" (click)="newTicketType()">New</button>
      </div>

      <form #ticketTypeForm="ngForm">

        <div class="grid">

          <!-- Like Ticket: ID + Show in same row -->
          <div class="field">
            <label>Ticket Type ID</label>

            <div class="inline-row">
              <input class="inp"
                     type="text"
                     [(ngModel)]="ticketType.ticketTypeId"
                     name="ticketTypeId"
                     required
                     maxlength="5"
                     #typeId="ngModel"
                     placeholder="Enter Ticket Type ID">

              <button type="button"
                      class="btn ghost"
                      (click)="showTicketType()"
                      [disabled]="typeId.invalid">
                Show
              </button>
            </div>
          </div>

          <div class="field">
            <label>Type Name</label>
            <input class="inp"
                   type="text"
                   [(ngModel)]="ticketType.ticketTypeName"
                   name="ticketTypeName"
                   required
                   #typeName="ngModel"
                   placeholder="Enter Type Name">
          </div>

          <div class="field full">
            <label>Description</label>
            <textarea class="inp area"
                      [(ngModel)]="ticketType.description"
                      name="description"
                      rows="4"
                      placeholder="Enter Description"></textarea>
          </div>

        </div>

        <!-- Like Ticket: action row bottom -->
        <div class="action-row">
          <button type="button"
                  class="btn primary"
                  (click)="saveTicketType()"
                  [disabled]="ticketTypeForm.invalid">
            Save
          </button>

          <button type="button"
                  class="btn"
                  (click)="updateTicketType()"
                  [disabled]="ticketTypeForm.invalid">
            Update
          </button>

          <button type="button"
                  class="btn danger"
                  (click)="deleteTicketType()"
                  [disabled]="typeId.invalid">
            Delete
          </button>
        </div>

      </form>

      <div class="tip">
        ðŸ’¡ Tip: Use <b>Select</b> from the list to load a ticket type into the form.
      </div>
    </div>

    <!-- ===================== RIGHT : TABLE ===================== -->
    <div class="table-section">

      <!-- Like Ticket: Topbar -->
      <div class="topbar card-glass">
        <div>
          <h3 class="list-title">Ticket Types List</h3>
          <p class="muted">All available ticket types.</p>
        </div>
      </div>

      <!-- Like Ticket: Table container -->
      <div class="table-wrap card-glass">
        <table class="cool-table">
          <thead>
            <tr>
              <th>Type ID</th>
              <th>Name</th>
              <th>Description</th>
              <th style="width:120px;">Action</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let tt of ticketTypes">
              <td><span class="pill">{{ tt.ticketTypeId }}</span></td>
              <td>{{ tt.ticketTypeName }}</td>
              <td class="text-col">{{ tt.description }}</td>
              <td>
                <button type="button" class="btn ghost smallbtn" (click)="selectTicketType(tt)">
                  Select
                </button>
              </td>
            </tr>

            <tr *ngIf="ticketTypes.length === 0">
              <td colspan="4" class="empty">ðŸ“­ No ticket types found</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
