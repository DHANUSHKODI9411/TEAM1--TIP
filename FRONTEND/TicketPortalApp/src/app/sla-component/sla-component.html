<div class="tr-page">

  <!-- HEADER -->
  <div class="tr-header">
    <div>
      <h2>SLA Management</h2>
      <p class="sub">Create, update, and manage SLAs in the same portal layout.</p>
    </div>

    <div class="err" *ngIf="errMsg">{{ errMsg }}</div>
  </div>

  <div class="page-container">

    <!-- ===================== LEFT : FORM ===================== -->
    <div class="form-section card-glass">

      <div class="card-title">
        <span class="dot"></span>
        <h3>SLA Editor</h3>
      </div>

      <!-- Like Ticket: New button top -->
      <div class="top-actions">
        <button type="button" class="btn ghost" (click)="newSla()">New</button>
      </div>

      <form #slaForm="ngForm">
        <div class="grid">

          <!-- SLA ID + Get inline (like Ticket ID + Show) -->
          <div class="field">
            <label>SLA ID</label>

            <div class="inline-row">
              <input class="inp"
                     type="text"
                     [(ngModel)]="sla.slAid"
                     name="slAid"
                     maxlength="5"
                     required
                     #slAidCtrl="ngModel"
                     placeholder="Enter SLA ID">

              <button type="button"
                      class="btn ghost"
                      (click)="getSla()"
                      [disabled]="slAidCtrl.invalid">
                Show
              </button>
            </div>
          </div>

          <div class="field">
            <label>Ticket Type ID</label>
            <input class="inp"
                   type="text"
                   [(ngModel)]="sla.ticketTypeId"
                   name="ticketTypeId"
                   maxlength="5"
                   placeholder="Enter Ticket Type ID">
          </div>

          <div class="field">
            <label>Response Time (hrs)</label>
            <input class="inp"
                   type="number"
                   [(ngModel)]="sla.responseTime"
                   name="responseTime"
                   placeholder="Enter Response Time">
          </div>

          <div class="field">
            <label>Resolution Time (hrs)</label>
            <input class="inp"
                   type="number"
                   [(ngModel)]="sla.resolutionTime"
                   name="resolutionTime"
                   placeholder="Enter Resolution Time">
          </div>

          <div class="field">
            <label>Description</label>
            <input class="inp"
                   type="text"
                   [(ngModel)]="sla.description"
                   name="description"
                   placeholder="Enter Description">
          </div>

        </div>

        <!-- Like Ticket: Save/Update/Delete bottom -->
        <div class="action-row">
          <button type="button" class="btn primary" (click)="addSla()">Save</button>
          <button type="button" class="btn" (click)="updateSla()">Update</button>
          <button type="button" class="btn danger" (click)="deleteSla()">Delete</button>
        </div>
      </form>

      <div class="tip">
        ðŸ’¡ Tip: Use <b>Show</b> to load a SLA and edit it.
      </div>

    </div>

    <!-- ===================== RIGHT : TABLE ===================== -->
    <div class="table-section">

      <div class="topbar card-glass">
        <div>
          <h3 class="list-title">All SLAs</h3>
          <p class="muted">List of SLA configurations.</p>
        </div>

        <!-- Optional: Clear button on right like ticket list -->
        <button type="button" class="btn ghost" (click)="newSla()">Clear</button>
      </div>

      <div class="table-wrap card-glass">
        <table class="cool-table">
          <thead>
            <tr>
              <th>SLA ID</th>
              <th>Ticket Type</th>
              <th>Response Time</th>
              <th>Resolution Time</th>
              <th>Description</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let s of slas">
              <td><span class="pill">{{ s.slAid }}</span></td>
              <td><span class="pill pill2">{{ s.ticketTypeId }}</span></td>
              <td>{{ s.responseTime }}</td>
              <td>{{ s.resolutionTime }}</td>
              <td class="text-col">{{ s.description }}</td>
            </tr>

            <tr *ngIf="!slas || slas.length === 0">
              <td colspan="5" class="empty">ðŸ“­ No SLAs found</td>
            </tr>
          </tbody>

        </table>
      </div>

    </div>

  </div>
</div>
